<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–∏–∑—É–∞–ª—å–Ω–∞—è –ù–æ–≤–µ–ª–ª–∞ - –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="game-container">
        <!-- –°–ª–æ–π —Ñ–æ–Ω–∞ -->
        <div id="background-layer">
            <img id="background-image" src="" alt="–§–æ–Ω">
        </div>

        <!-- –°–ª–æ–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π -->
        <div id="characters-layer">
            <div id="character-left" class="character-slot"></div>
            <div id="character-center" class="character-slot"></div>
            <div id="character-right" class="character-slot"></div>
        </div>

        <!-- UI —Å–ª–æ–π -->
        <div id="ui-layer">
            <!-- ===== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ===== -->
            <div id="screen-menu" class="screen">
                <div class="menu-content">
                    <h1>–ú–æ—è –í–∏–∑—É–∞–ª—å–Ω–∞—è –ù–æ–≤–µ–ª–ª–∞</h1>
                    <p>–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º</p>
                    <div class="menu-buttons">
                        <button id="btn-new-game" class="menu-btn-large">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
                        <button id="btn-load-save">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                        <button id="btn-enter-code">–í–≤–µ—Å—Ç–∏ –∫–æ–¥ —Ö–æ–¥–∞</button>
                        <button id="btn-settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                    </div>
                </div>
            </div>

            <!-- ===== –í–´–ë–û–† –†–û–õ–ò ===== -->
            <div id="screen-role-select" class="screen hidden">
                <div class="role-content">
                    <h2>–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É —Ä–æ–ª—å</h2>
                    <p class="role-description">–ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –¥–µ–ª–∞–µ—Ç —Å–≤–æ–π —Ö–æ–¥ –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –∫–æ–¥ –¥—Ä—É–≥–æ–º—É</p>
                    <div class="role-buttons">
                        <div class="role-card" id="role-card-1">
                            <div class="role-icon">1</div>
                            <h3>–ò–≥—Ä–æ–∫ 1</h3>
                            <p>–ù–∞—á–∏–Ω–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∏ –¥–µ–ª–∞–µ—Ç –ø–µ—Ä–≤—ã–π —Ö–æ–¥</p>
                            <button class="role-select-btn" data-role="1">–í—ã–±—Ä–∞—Ç—å</button>
                        </div>
                        <div class="role-card" id="role-card-2">
                            <div class="role-icon">2</div>
                            <h3>–ò–≥—Ä–æ–∫ 2</h3>
                            <p>–ü—Ä–æ–¥–æ–ª–∂–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–¥–∞</p>
                            <button class="role-select-btn" data-role="2">–í—ã–±—Ä–∞—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ===== –ò–ì–†–û–í–û–ô –≠–ö–†–ê–ù ===== -->
            <div id="screen-gameplay" class="screen hidden">
                <!-- –î–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ -->
                <div id="dialog-box">
                    <div id="speaker-name"></div>
                    <div id="dialog-text"></div>
                    <div id="next-indicator">‚ñº</div>
                </div>

                <!-- –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ -->
                <div id="choice-menu" class="hidden">
                    <div id="choice-container"></div>
                </div>

                <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                <div id="control-panel">
                    <button id="log-btn" title="–ò—Å—Ç–æ—Ä–∏—è">üìñ</button>
                    <button id="menu-btn" title="–ú–µ–Ω—é">‚ò∞</button>
                    <button id="save-btn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">üíæ</button>
                    <button id="settings-panel-btn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
                    <button id="end-turn-btn" title="–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ö–æ–¥">üîÑ</button>
                </div>

                <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ö–æ–¥–∞ -->
                <div id="turn-indicator">
                    –•–æ–¥: <span id="current-player">–ò–≥—Ä–æ–∫ 1</span>
                </div>
            </div>

            <!-- ===== –≠–ö–†–ê–ù –í–´–í–û–î–ê –ö–û–î–ê ===== -->
            <div id="screen-code-output" class="screen hidden">
                <div class="code-output-content">
                    <div class="code-output-icon">üîÑ</div>
                    <h2>–•–æ–¥ –∑–∞–≤–µ—Ä—à—ë–Ω!</h2>
                    <p class="code-output-message">–ü–µ—Ä–µ–¥–∞–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –∏–≥—Ä–æ–∫—É <span id="next-player-num">2</span>:</p>
                    <div class="code-display">
                        <textarea id="generated-code" readonly></textarea>
                    </div>
                    <div class="code-buttons">
                        <button id="btn-copy-code" class="btn-primary">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
                        <button id="btn-confirm-transfer" class="btn-success">–Ø –ø–µ—Ä–µ–¥–∞–ª –∫–æ–¥</button>
                    </div>
                    <p class="code-hint">–ü–æ—Å–ª–µ –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–¥–∞ –∏–≥—Ä–∞ –≤–µ—Ä–Ω—ë—Ç—Å—è –≤ –º–µ–Ω—é</p>
                </div>
            </div>

            <!-- ===== –≠–ö–†–ê–ù –í–í–û–î–ê –ö–û–î–ê ===== -->
            <div id="screen-code-input" class="screen hidden">
                <div class="code-input-content">
                    <div class="code-input-icon">üîê</div>
                    <h2>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Ö–æ–¥–∞</h2>
                    <p id="code-input-message">–ü–æ–ª—É—á–∏–ª–∏ –∫–æ–¥ –æ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞? –í–≤–µ–¥–∏—Ç–µ –µ–≥–æ –Ω–∏–∂–µ:</p>
                    <div class="code-input-field">
                        <textarea id="input-code" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ —Å—é–¥–∞..."></textarea>
                    </div>
                    <div class="code-buttons">
                        <button id="btn-submit-code" class="btn-primary">–ü—Ä–∏–Ω—è—Ç—å —Ö–æ–¥</button>
                        <button id="btn-back-to-menu" class="btn-secondary">–ù–∞–∑–∞–¥</button>
                    </div>
                    <div id="code-error" class="error-message hidden"></div>
                </div>
            </div>

            <!-- ===== –ú–ï–ù–Æ –ù–ê–°–¢–†–û–ï–ö ===== -->
            <div id="settings-menu" class="hidden">
                <div class="settings-content">
                    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    <div class="setting-item">
                        <label>–ì—Ä–æ–º–∫–æ—Å—Ç—å –º—É–∑—ã–∫–∏:</label>
                        <input type="range" id="music-volume" min="0" max="100" value="50">
                        <span id="music-volume-value">50%</span>
                    </div>
                    <div class="setting-item">
                        <label>–ì—Ä–æ–º–∫–æ—Å—Ç—å –∑–≤—É–∫–æ–≤:</label>
                        <input type="range" id="sfx-volume" min="0" max="100" value="70">
                        <span id="sfx-volume-value">70%</span>
                    </div>
                    <div class="setting-item">
                        <label>–°–∫–æ—Ä–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞:</label>
                        <input type="range" id="text-speed" min="10" max="100" value="30">
                        <span id="text-speed-value">30</span>
                    </div>
                    <div class="setting-buttons">
                        <button id="save-game-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É</button>
                        <button id="load-game-btn">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                        <button id="reset-game-btn">üîÑ –ù–∞—á–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞</button>
                    </div>
                    <button id="close-settings" class="btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>

            <!-- ===== –ü–ê–£–ó–ê/–ú–ï–ù–Æ –í –ò–ì–†–ï ===== -->
            <div id="pause-menu" class="hidden">
                <div class="pause-content">
                    <h3>–ú–µ–Ω—é</h3>
                    <button id="pause-save-btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button id="pause-load-btn">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
                    <button id="pause-log-btn">üìñ –ò—Å—Ç–æ—Ä–∏—è</button>
                    <button id="pause-endturn-btn">üîÑ –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ö–æ–¥</button>
                    <button id="resume-game-btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                    <button id="quit-game-btn">–í—ã–π—Ç–∏ –≤ –º–µ–Ω—é</button>
                </div>
            </div>

            <!-- ===== –ü–ê–ù–ï–õ–¨ –õ–û–ì–û–í ===== -->
            <div id="log-panel" class="hidden">
                <div class="log-content">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è</h3>
                    <div class="log-info">
                        <span id="log-turn-count">–•–æ–¥–æ–≤: 0</span>
                        <span id="log-player-count">–ò–≥—Ä–æ–∫–æ–≤: 1</span>
                    </div>
                    <textarea id="log-text" readonly></textarea>
                    <div class="log-buttons">
                        <button id="copy-log-btn" class="btn-primary">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                        <button id="close-log-btn" class="btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
                    </div>
                </div>
            </div>

            <!-- ===== –≠–ö–†–ê–ù –ö–û–ù–¶–û–í–ö–ò ===== -->
            <div id="screen-ending" class="screen hidden">
                <div class="ending-content">
                    <div class="ending-icon">üèÜ</div>
                    <h2 id="ending-title">–ö–æ–Ω–µ—Ü</h2>
                    <p id="ending-text"></p>
                    <div class="ending-stats">
                        <div class="stat-item">
                            <span class="stat-label">–•–æ–¥–æ–≤ —Å–¥–µ–ª–∞–Ω–æ:</span>
                            <span id="stat-turns" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–í—ã–±–æ—Ä–æ–≤ –∏–≥—Ä–æ–∫–æ–≤:</span>
                            <span id="stat-choices" class="stat-value">0</span>
                        </div>
                    </div>
                    <div class="ending-buttons">
                        <button id="view-log-btn" class="btn-primary">üìñ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                        <button id="restart-btn" class="btn-secondary">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                        <button id="back-to-menu-btn" class="btn-secondary">–í –º–µ–Ω—é</button>
                    </div>
                </div>
            </div>

            <!-- ===== –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò ===== -->
            <div id="loading-screen" class="hidden">
                <div class="loader"></div>
                <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
        </div>
    </div>

    <!-- –ê—É–¥–∏–æ -->
    <audio id="bgm-player" loop></audio>
    <audio id="sfx-player"></audio>

    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>
